---
layout: post
title: "2. 데이터 형식"
date: 2019-01-14 00:15:00
description:
share: true
comments: true
tags: 
 - C#
---

**키워드** : 컴파일러가 토드를 해석할 때 이용.

C#의 모든 기본 형식에는 **약식 이름**과 **전체 이름** 두가지가 있다.

**전체 이름** : 기본 클래스 라이브러리(BCL, Base Class Library)의 형식 이름에 해당(BCL 이름).
- 모든 언어에서 동일.

**약식 이름** : 전체 이름에 대한 짧은 이름이나 약식 이름으로 키워드를 제공한다.

컴파일러 관점에서 두 가지 이름은 정확히 동일하다.  
두 가지 중 한 가지 이름을 일관되게 사용하자.  
보통은 BCL이름(String)보다는 C# 키워드 형식(string)을 사용한다.

- - -

기본 숫자 형식
======
**정수 형식** : sbyte, byte(부호 없음), short(2바이트), ushort, int, uint, long, ulong

**부동소수점 형식** : float, double

**decimal 형식** : 128비트 정밀도의 10진 부동소수점 형식

**리터럴 값** : 소스코드 내에서 상수 값의 표현.
- 기본적으로 소수점으로 리터럴 숫자를 지정하면 컴파일러는 숫자를 double형식으로 해석한다.
- 소수점이 없는 리터럴 값은 int로 해석. 값이 너무 크면 long으로 해석. 다른 정수 형 변수에 할당 가능.
- 리터럴 접미사를 붙이면 명시적으로 리터럴 값의 형식을 정할 수 있다.
- U(uint), L(long), UL(ulong), F(float)

**지수 표기법** : ex)6.023E23F ->6.023뒤에 0이 23개있는 float값.
- 16진수 표기법 : 앞에 0x를 붙힌다.
- 16진수 출력 : 숫자 서식 지정자 사용. p77
- 라운드 트립 서식 p78

- - -

기타 기본 형식
======
**bool 형식** : 1바이트. BCL이름은 System.Boolean.

**문자 형식** : char, 2바이트. 정수계열 형식이다.

**문자열** : string

- - -

**축약 문자열 리터럴** : @기호를 문자열 앞에 사용하면 역슬래시, 새줄, 들여쓰기를 역슬래시(이스케이프 시퀀스) 없이 표시가능.  
역슬래시 문자를 다시 해석하지 않는다.

**문자열 보간 (6.0)** : $기호를 문자열 접두어로 붙힌다. 문자열 안의 중괄호에 식을 포함한다.
- 지역화에 사용하기 좋다.

**using static 지시문 (6.0)** : 정적 메소드와 속성에 대해서만 접두어 생략.

**문자열 서식** : string.Format() 참조.

새 줄 : 윈도우는 캐리지리턴(\r) + 줄바꿈(\n), 유닉스는 줄바꿈만.

문자열 변수에 완전히 새로운 값을 할당할 수는 있지만 string의 내용을 수정하는 기능은 없다.

System.Text.StringBuilder : 문자열을 많이 수정할 때 사용하면 좋은 데이터 형식.
- Append(), AppendFormat, Insert, Remove, Replace등의 메소드 사용가능.
- 이들 메서드는 자체 데이터를 수정하며 단순히 새로운 문자열을 반환하는 것이 아님.

- - -

**null** : 변수에 아무것도 설정되지 않음을 가리킨다.
- 참조 형식, 포인터 형식, null 허용 값 형식에 할당할 수 있다.

**void 형식** : 반환 값이 없을 경우 반환 형.
- C++에서는 메소드의 반환 형 말고도 알 수 없는 형식의 저장소 위치에 대한 포인터를 나타낼 때도 사용.
- C#에서도 가능하지만 잘 사용하지 않는다.

**암시적으로 형식화된 지역 변수 (3.0)** : var 키워드. 할당된 값으로부터 데이터 형식을 결정.
- 선언시에 초기화를 한다. 
- 데이터 형식을 알 때는 사용하지 않는 것이 좋다.
- 익명 형식의 사용이 가능. 14장에서 자세히.

- - -

형식 분류
======
모든 형식은 값 형식과 참조 형식 두 가지 중 하나에 속한다.  
이 둘의 차이는 복사되는 방식.

**값 형식** : 직접 값을 담는다. 변수는 메모리에서 해당 값이 저장된 동일한 위치를 참조.
- 미리 정의된 형식은 string을 제외하고 모두 값 형식.
- 메모리 복사가 필요하므로 메모리를 적게 사용하도록 정의해야 한다.

**참조 형식** : 데이터를 담고 있는 저장소 위치(힙, heap)에 대한 참조를 갖는다.
- 복사할 때 메모리 복사가 필요하지 않다. 참조만 복사된다.
- 참조는 프로세서가 다루는 최대 비트수와 크기가 같다.(32비트, 64비트)

**null 허용 한정자 (2.0)** : 값 형식은 참조를 포함할 수 없기 때문에 일반적으로 null을 할당할 수 없다.  
null을 할당할 필요가 있을 때 값 형식 뒤에 허용 한정자 ?를 붙인다.
- 데이터베이스 프로그래밍에 유용하다.

- - -

데이터 형식 간의 변환
======
캐스팅 연산 사용.

**명시적 캐스트(explicit cast)** : 변환하려는 변수 앞에 변환할 형식을 괄호로 감싸 붙인다.

Checked와 Uncheked 변환 : Checked블록 안에서 변환을 할 때 예외를 던져준다. p103
- C#컴파일러의 기본 동작은 Unchecked이다. 커맨드라인 옵션으로 Checked로 변경 가능.
- checked 옵션은 컴파일하는 동안에 적용된다.
- Unchecked블록을 사용하면 런타임에 예외 발생을 막아준다.

**암시적 변환(implicit conversion)** : 정밀도 손실이 없고 값에 근본적인 변화가 일어나지 않는 경우. 할당 연산자로 변환.

**메서드를 사용한 변환** : 각 숫자 데이터 형식에 있는 Parse()메서드.  
문자열에서 해당 숫자 형식으로 변환.
- System.Convert의 메서드를 사용하면 기본 형식간 변환 가능. 
- ToString()으로 모든 형식의 문자열 표현 가능.

**TryParse() (2.0)** : 변환에 실패할 경우 예외를 던지지 않고 false를 반환.

- - -

배열
======
변수 하나로 동일 형식의 여러 항목을 저장.
- 선언 : 데이터형식과 그 뒤에 대괄호.
- 할당 : 선언하면서 바로 할당 가능. 중괄호에 들어갈 요소를 나열. 선언 이후에 할당하려면 new 키워드 사용.
- default 키워드 (2.0) : 데이터 형식의 명시적인 기본 값 사용 가능.
- 액세스 : 대괄호 사용.
- 길이 : .Length
- 스태틱 메소드(System.Array) : Sort(), Reverse, BinarySearch, Clear, Resize
- 인스턴스 메소드 : GetLength(첫 번째 차원의 요소 수를 반환), Rank(차원의 수를 반환), Clone

2차원 배열 : 첫 번째 차원은 가로, 두 번째 차원은 세로. ex) int[,] cells;






